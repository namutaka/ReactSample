# Reactの実践的設計の考え方

## 概要

Reactでの実践的なコンポーネント設計の考え方、方向性を整理する。

ポイント:
* データの塊と画面(UI)の表示とを分けて考える
* データ部はUIとは独立してデータ更新のサイクルを回せるように考える
    * これを具体的に実現するのが useReducerやReduct(Flux)、Typeless
* 画面表示部は基本的にはコンポーネントへの引数（Props）を入力として、決まったDOMを出力する関数として考える
    * 実際には、内部でuseStateなどでの状態をもつが、それはメインとなるデータ部とは独立する
* コンポーネントの再描画(再実行)を抑制する差分更新をうまく活用する

## データとUIを分ける

* その画面で表示するメインとなるデータの塊を整理する
    * データの塊と、そのデータを更新するアクションを定義する
    * データは必ずアクションからのみ変更される
    * データとアクションだけでアプリケーションが動くように考える
        * アクションがビジネスロジックとなる
        * アクションをDevToolのコンソールから実行するだけでアプリの機能が動く
        * アクションによるデータ更新は同期的な場合も非同期的な場合もある
    * 補足：
        * 実際にはその画面が大きく表示領域が分かれているような場合は、その領域ごとに独立してデータの塊とUIを定義することはある
        * メイン部、サイドバーのプロジェクト一覧部、ヘッダー部、など
* UI部はデータの塊をインプットとして、画面に表示するDOMを出力する関数として考える
    * データが変わればDOMが変わる。データが変わらなければDOMも変わらない、というイメージ
* データとコンポーネントのデータ更新のサイクルとして考える
* UIのコンポーネントに動きがあるような機能を持つことはある（アコーディオン表示、サイドバーの表示／非表示、入力フォームなど）
    * それはメインとなるデータ部とは独立したデータとUIのサイクルとして考える


## データが変わればUIが変わる

* データが変更されると、変更された内容によってDOMを再生成する
* シンプルには全てのDOM生成処理を再実行する
* 処理の効率を向上するために以下の３つの対応で処理をスキップする
    * 1. useMemoなどでコンポーネント内の処理をメモ化する
    * 2. React.memoでコンポーネント自体をメモ化する
    * 3. 変更があったデータを使うコンポーネントのみを再描画対象とする


### 1. useMemoなどでコンポーネント内の処理をメモ化する



### 2. React.memoでコンポーネント自体をメモ化する

### 3. 変更があったデータを使うコンポーネントのみを再描画対象とする

